import{u as p,r as P,j as i,m as G,S as O,a as e,I as b,L as s,P as o,as as de,at as Se,au as Pe,av as Ne,aw as ae,F as v,C,b as L,ax as Te,ay as ne,x as U,E as le,az as Q,ai as D,aA as z,aB as ee,aC as Y,A as ce,t as V,aD as re,a9 as oe,aE as me,aF as ue,aG as he,aH as se,aI as ie,p as A,M as pe,q as F,y as X,f as q,aJ as Ee,o as ve,s as H,aK as ge,aL as Ae,aM as Ie,l as Ce,aN as fe,aO as Ge,aP as Oe,aQ as _e,aR as ke,aS as ye,w as Re,g as Le,d as be}from"./index-646d6ab8.js";import{S as W}from"./Slider-a7b623ee.js";import{S as w}from"./Switch-65eebfb4.js";function Ue(r){const c=p(o.Settings),n=p(L),l=p(Te),[m,a]=P.useState(!1),N=["#39334d","#465281","#87855e","#4b6a45","#702e2e","picker"];return i(G.div,{...O("right","display"),className:"animation-container display",children:[i("div",{className:"top",children:[i("div",{className:"back",onClick:()=>m?a(!1):r.setPage([]),children:[e(b,{}),s("APPS.SETTINGS.TITLE")]}),e("div",{className:"title",children:s("APPS.SETTINGS.DISPLAY_BRIGHTNESS")}),e("div",{})]}),e("div",{style:{marginTop:"2rem"}}),e("div",{className:"category-title",children:s("APPS.SETTINGS.APPEARANCE")}),i("section",{children:[e("div",{className:"settings-item",children:e("div",{className:"appearance-container",children:e("div",{className:"appearance-switches",children:["light","dark"].map((d,T)=>{var u;return i("div",{className:"mode",onClick:()=>{o.Settings.patch({display:{...c.display,theme:d}})},children:[e("img",{src:`./assets/img/${d}-mode-placeholder.webp`,alt:"Theme"}),e("div",{className:"mode-text",children:s(`APPS.SETTINGS.${d.toUpperCase()}`)}),e(de,{checked:((u=c==null?void 0:c.display)==null?void 0:u.theme)===d})]},T)})})})}),i("div",{className:"settings-item",children:[e("div",{className:"setting",children:e("div",{className:"title",children:s("APPS.SETTINGS.AUTOMATIC")})}),e("div",{className:"setting-value",children:e(w,{checked:c.display.automatic,onChange:()=>{o.Settings.patch({display:{...c.display,automatic:!c.display.automatic}})}})})]})]}),e("div",{className:"category-title",children:s("APPS.SETTINGS.BRIGHTNESS")}),e("section",{children:i("div",{className:"settings-item",children:[e(Se,{}),e(W,{onChange:d=>{o.Settings.patch({display:{...c.display,brightness:d}})},value:c.display.brightness,id:"brightness",min:.1,max:1,step:.01}),e(Pe,{})]})}),e("div",{className:"category-title",children:s("APPS.SETTINGS.PHONE_SCALE")}),e("section",{children:i("div",{className:"settings-item",children:[e(Ne,{}),e(W,{onChange:d=>{l||o.Settings.patch({display:{...c.display,size:d}})},value:c.display.size,id:"phone-scale-slider",min:.5,max:1.1,step:.1}),e(ae,{})]})}),n.allowFrameColorChange&&i(v,{children:[e("div",{className:"category-title",children:s("APPS.SETTINGS.FRAME_COLOR")}),e("section",{children:e("div",{className:"settings-item",children:e("div",{className:"colors",children:N.map((d,T)=>{let u=d==="picker";return e("div",{className:"color",style:{backgroundImage:u&&"url(./assets/img/icons/picker.png)",boxShadow:!u&&`inset  0 0.1em 5em ${d}, 0 0 0 0.2em hsl(254, 30%, 85%)`},"data-active":c.display.frameColor===d,onClick:()=>{if(u){C.ColorPicker.set({onSelect:E=>{o.Settings.patch({display:{...c.display,frameColor:E}})}});return}o.Settings.patch({display:{...c.display,frameColor:d}})}},T)})})})})]})]})}function Be(r){var d,T,u,E;const c=p(L),n=p(o.Settings),[l,m]=P.useState(!1),[a,N]=P.useState(null);return i(G.div,{...O("right",l?"notificationsInApp":"notifications"),className:"animation-container",children:[i("div",{className:"top",children:[i("div",{className:"back",onClick:()=>{l?m(!1):r.setPage([])},children:[e(b,{}),l?s("APPS.SETTINGS.BACK"):s("APPS.SETTINGS.TITLE")]}),e("div",{className:"title",children:l?s(`APP_NAMES.${a}`,c.apps[a].name):s("APPS.SETTINGS.NOTIFICATIONS")}),e("div",{})]}),e("div",{style:{marginTop:"0.5rem"}}),l?e(v,{children:i("section",{children:[i("div",{className:"settings-item",children:[e("div",{className:"setting",children:e("div",{className:"title",children:s("APPS.SETTINGS.ALLOW_NOTIFICATIONS")})}),e("div",{className:"setting-value",children:e(w,{onChange:()=>{var S,h,_;o.Settings.set({...o.Settings.value,notifications:{...n.notifications,[a]:{...(S=n.notifications)==null?void 0:S[a],enabled:!((_=(h=n.notifications)==null?void 0:h[a])!=null&&_.enabled)}}})},checked:((T=(d=n.notifications)==null?void 0:d[a])==null?void 0:T.enabled)??!0})})]}),i("div",{className:"settings-item",children:[e("div",{className:"setting",children:e("div",{className:"title",children:s("APPS.SETTINGS.SOUNDS")})}),e("div",{className:"setting-value",children:e(w,{onChange:()=>{var S,h,_;o.Settings.set({...o.Settings.value,notifications:{...n.notifications,[a]:{...(S=n.notifications)==null?void 0:S[a],sound:!((_=(h=n.notifications)==null?void 0:h[a])!=null&&_.sound)}}})},checked:((E=(u=n.notifications)==null?void 0:u[a])==null?void 0:E.sound)??!0})})]})]})}):i(v,{children:[e("div",{className:"category-title",children:s("APPS.SETTINGS.NOTIFICATIONS")}),e("section",{style:{marginBottom:"4rem"},children:Object.keys(c.apps).filter(S=>{var h;return ne(S)||((h=c.apps[S])==null?void 0:h.removable)===!1}).sort((S,h)=>s(`APP_NAMES.${S}`,c.apps[S].name).localeCompare(s(`APP_NAMES.${h}`,c.apps[h].name))).map((S,h)=>i("div",{className:"settings-item",style:{cursor:"pointer"},onClick:()=>{N(S),m(!0)},children:[i("div",{className:"setting",children:[e("img",{src:c.apps[S].icon??`./assets/img/icons/apps/${S}.jpg`}),e("div",{className:"title",children:s(`APP_NAMES.${S}`,c.apps[S].name)})]}),e("div",{className:"setting-value",children:e(U,{className:"chevron"})})]},h))})]})]})}function De(r){var T;const c=p(o.Settings),n=p(L),l=p(ce),[m,a]=P.useState(!1),[N,d]=P.useState(null);return P.useEffect(()=>{if(le("Settings"))return Q.set(!1),()=>{Q.set(!0)}},[l==null?void 0:l.active]),i(G.div,{...O("right",m?"soundBrowsingTunes":"sound"),className:"animation-container",children:[i("div",{className:"top",children:[i("div",{className:"back",onClick:()=>{m?a(!1):r.setPage([]),o.SoundManager.reset()},children:[e(b,{}),m?s("APPS.SETTINGS.BACK"):s("APPS.SETTINGS.TITLE")]}),e("div",{className:"title",children:m?N==="ringtone"?s("APPS.SETTINGS.RINGTONE"):s("APPS.SETTINGS.TEXT_TONE"):s("APPS.SETTINGS.SOUND_HAPTICS")}),e("div",{})]}),e("div",{style:{marginTop:"0.5rem"}}),m?i(v,{children:[e("div",{className:"category-title",children:N==="ringtone"?s("APPS.SETTINGS.RINGTONE"):s("APPS.SETTINGS.TEXT_TONE")}),e("section",{children:Object.keys((T=n.sounds)==null?void 0:T[N]).map((u,E)=>e("div",{className:"settings-item",style:{cursor:"pointer"},onClick:()=>{var S,h;o.Settings.set({...o.Settings.value,sound:{...o.Settings.value.sound,[N]:u}}),o.SoundManager.set({url:`./assets/sound/${N==="ringtone"?"ringtones":"texttones"}/${(h=(S=n.sounds)==null?void 0:S[N])==null?void 0:h[u]}`,timeout:N==="ringtones"?5e3:null,override:!0})},children:i("div",{className:"setting",children:[u==c.sound[N]?e(D,{className:"checkmark"}):e(D,{className:"checkmark hidden"}),e("div",{className:"title",children:z(u)})]})},E))})]}):i(v,{children:[e("div",{className:"category-title",children:s("APPS.SETTINGS.RINGTONE_VOLUME")}),e("section",{children:i("div",{className:"settings-item",children:[e(ee,{}),e(W,{onChange:u=>{u!==void 0&&o.Settings.patch({sound:{...o.Settings.value.sound,volume:u}})},value:c.sound.volume!==void 0?c.sound.volume:.5,min:0,max:1,step:.05}),e(Y,{})]})}),e("div",{className:"category-title",children:s("APPS.SETTINGS.CALL_VOLUME")}),e("section",{children:i("div",{className:"settings-item",children:[e(ee,{}),e(W,{onChange:u=>{o.Settings.set({...o.Settings.value,sound:{...o.Settings.value.sound,callVolume:u}})},value:c.sound.callVolume!==void 0?c.sound.callVolume:.5,min:0,max:1,step:.05}),e(Y,{})]})}),e("div",{className:"category-title",children:s("APPS.SETTINGS.SOUND_HAPTICS_PATTERNS")}),i("section",{children:[i("div",{className:"settings-item",style:{cursor:"pointer"},onClick:()=>{d("ringtone"),a(!0)},children:[e("div",{className:"setting",children:e("div",{className:"title",children:s("APPS.SETTINGS.RINGTONE")})}),i("div",{className:"setting-value",children:[e("div",{className:"value",children:z(c.sound.ringtone)}),e(U,{className:"chevron"})]})]}),i("div",{className:"settings-item",style:{cursor:"pointer"},onClick:()=>{d("texttone"),a(!0)},children:[e("div",{className:"setting",children:e("div",{className:"title",children:s("APPS.SETTINGS.TEXT_TONE")})}),i("div",{className:"setting-value",children:[e("div",{className:"value",children:z(c.sound.texttone)}),e(U,{className:"chevron"})]})]})]})]})]})}function we(r){const{settingsSections:c}=P.useContext(j),n=p(o.Settings),l=p(L),m=8.25*1e3*1e3;return P.useEffect(()=>{if(!l.apps)return;let a=Object.keys(l.apps).filter(d=>{var T;return((T=l.apps[d])==null?void 0:T.removable)===!1}).reduce((d,T)=>d+l.apps[T].size,0),N=n.storage.used-(a+m);L.patch({apps:{...l.apps,Photos:{...l.apps.Photos,size:l.apps.Photos.size+N}}})},[]),i(G.div,{...O("right","storage"),className:"animation-container",children:[i("div",{className:"top",children:[i("div",{className:"back",onClick:()=>{var a;r.setPage((a=c==null?void 0:c[2])==null?void 0:a[0].options)},children:[e(b,{}),s("APPS.SETTINGS.TITLE")]}),e("div",{className:"title",children:s("APPS.SETTINGS.STORAGE")}),e("div",{})]}),e("div",{style:{marginTop:"0.5rem"}}),e("section",{children:i("div",{className:"settings-item",style:{cursor:"pointer"},children:[e("div",{className:"setting",children:e("div",{className:"title",children:s("APPS.SETTINGS.USED")})}),e("div",{className:"setting-value",children:i("div",{className:"value",children:[V(n.storage.used/1e3/1e3,2)," GB ",s("APPS.SETTINGS.OF")," ",V(n.storage.total/1e3/1e3,0)," GB"]})})]})}),e("section",{children:Object.keys(l.apps).filter(a=>{var N;return ne(a)||((N=l.apps[a])==null?void 0:N.removable)===!1}).sort((a,N)=>l.apps[N].size-l.apps[a].size).map((a,N)=>i("div",{className:"settings-item",style:{cursor:"pointer"},children:[i("div",{className:"setting",children:[e("img",{src:l.apps[a].icon??`./assets/img/icons/apps/${a}.jpg`}),e("div",{className:"title",children:s(`APP_NAMES.${a}`,l.apps[a].name)})]}),e("div",{className:"setting-value",children:e("div",{className:"value",children:l.apps[a].size>1e6?V(l.apps[a].size/1e6,2)+" GB":l.apps[a].size>1e3?V(l.apps[a].size/1e3,2)+" MB":l.apps[a].size+" KB"})})]}))})]})}function Me(r){const c=p(o.Settings),[n,l]=P.useState(!1),m=p(L);return i(G.div,{...O("right",n?"browsingWallpapers":"wallpaper"),className:"animation-container",children:[i("div",{className:"top",children:[i("div",{className:"back",onClick:()=>{n?l(!1):r.setPage([])},children:[e(b,{}),n?s("APPS.SETTINGS.WALLPAPER"):s("APPS.SETTINGS.TITLE")]}),i("div",{className:"title",children:[n?s("APPS.SETTINGS.WALLPAPERS"):s("APPS.SETTINGS.WALLPAPER")," "]}),e("div",{})]}),n?i("div",{className:"wallpapers-container",children:[e("div",{className:"wallpaper add",onClick:()=>{var a,N,d;C.Gallery.set({allowExternal:(d=(N=(a=L)==null?void 0:a.value)==null?void 0:N.AllowExternal)==null?void 0:d.Other,onSelect:T=>{o.Settings.patch({wallpaper:{...c.wallpaper,background:T.src}})}})},children:e(ae,{})}),c.wallpaper.background.includes("http")&&e("div",{className:"wallpaper active",style:{backgroundImage:`url(${c.wallpaper.background})`}}),Object.keys(m.wallpapers).map((a,N)=>e(Fe,{wallpaper:a,selected:c.wallpaper.background,theme:c.display.theme,cb:()=>{o.Settings.patch({wallpaper:{...c.wallpaper,background:a}})}},N))]}):e(Ke,{setExploringWallpapers:l})]})}const Fe=({wallpaper:r,selected:c,cb:n})=>{const[l,m]=P.useState("");return P.useEffect(()=>{re(r,a=>m(a))},[]),e("div",{className:oe("wallpaper",c===r&&"active"),style:{backgroundImage:`url(${l})`},onClick:()=>n()})},Ke=r=>{var m;const[c,n]=P.useState(""),l=p(o.Settings);return P.useEffect(()=>{re(l.wallpaper.background,a=>n(a))},[]),i("section",{children:[i("div",{className:"settings-item",style:{cursor:"pointer"},onClick:()=>r.setExploringWallpapers(!0),children:[e("div",{className:"setting",children:e("div",{className:"title",children:s("APPS.SETTINGS.CHOOSE_NEW_WALLPAPER")})}),e("div",{className:"setting-value",children:e(U,{className:"chevron"})})]}),e("div",{className:"settings-item",children:i("div",{className:"wallpapers",children:[e("div",{className:"preview",style:{backgroundImage:`url(${c})`},children:i("div",{className:"lockscreen-container",children:[e(me,{}),e(ue,{layout:((m=l.lockscreen)==null?void 0:m.layout)??1})]})}),e("div",{className:"preview",style:{backgroundImage:`url(${c})`},children:i("div",{className:"settings-homescreen-container",children:[e("div",{className:"settings-homescreen-apps",children:l.apps[1].filter(a=>!he(a)).slice(0,24).map(a=>{let N=L.value.apps[a],d=(N==null?void 0:N.icon)??`./assets/img/icons/apps/${a}.jpg`;return i("div",{className:"settings-homescreen-app",children:[e("img",{src:d,onError:T=>T.currentTarget.src="./assets/img/icons/apps/unkown.png"}),e("div",{className:"app-name",children:a})]})})}),e("div",{className:"favourite-apps",children:l.apps[0].map(a=>{let N=L.value.apps[a],d=(N==null?void 0:N.icon)??`./assets/img/icons/apps/${a}.jpg`;return e("div",{className:"settings-homescreen-app",children:e("img",{src:d})})})})]})})]})}),i("div",{className:"settings-item",children:[e("div",{className:"setting",children:e("div",{className:"title",children:s("APPS.SETTINGS.BLUR_HOMESCREEN")})}),e("div",{className:"setting-value",children:e(w,{checked:l.wallpaper.blur,onChange:()=>{o.Settings.patch({wallpaper:{...l.wallpaper,blur:!l.wallpaper.blur}})}})})]})]})};function xe(r){const c=P.useRef(null),n=p(o.Settings),[l,m]=P.useState([]),[a,N]=P.useState(!1),[d,T]=P.useState([]),[u,E]=P.useState(!1),S=R=>{R=="backspace"?m(I=>I.slice(0,-1)):m(I=>{if(I.length===4)return I;let M=[...I,R];return M.length===4&&(u?A("Security",{action:"setPin",oldPin:d.join(""),pin:M.join("")}).then(x=>{if(!x){C.PopUp.set({title:s("APPS.SETTINGS.PIN_CODE_ERROR.TITLE"),description:s("APPS.SETTINGS.PIN_CODE_ERROR.WRONG"),buttons:[{title:s("APPS.SETTINGS.PIN_CODE_ERROR.OK")}]}),m([]);return}o.Settings.patch({security:{...n.security,pinCode:!0}}),E(!1),m([])}):A("Security",{action:"verifyPin",pin:M.join("")},!0).then(x=>{x?(N(!0),T(M),m([])):(c.current.className=`pin-circles wrong ${n.display.theme=="dark"?"light":"dark"}`,setTimeout(()=>{c.current.className=`pin-circles ${n.display.theme=="dark"?"light":"dark"}`,m([])},350))})),M})},h=R=>{R?A("Security",{action:"setFaceId",pin:d.join("")},!0).then(I=>{I&&o.Settings.patch({security:{...o.Settings.value.security,faceId:!0}})}):A("Security",{action:"removeFaceId",pin:d.join("")},!0).then(I=>{I&&o.Settings.patch({security:{...o.Settings.value.security,faceId:!1}})})},_=()=>{A("Security",{action:"removePin",pin:l.join("")},!0).then(R=>{R&&o.Settings.patch({security:{pinCode:!1,faceId:!1}})})};return i(G.div,{...O("right","passcode"),className:"animation-container",children:[i("div",{className:"top",children:[i("div",{className:"back",onClick:()=>r.setPage([]),children:[e("i",{className:"fal fa-chevron-left"}),a||!n.security.pinCode?s("APPS.SETTINGS.BACK"):s("CANCEL")]}),e("div",{className:"title",children:a||!n.security.pinCode?s("APPS.SETTINGS.FACE_ID_PASSWORD"):s("APPS.SETTINGS.ENTER_PASSCODE")}),e("div",{})]}),a||!n.security.pinCode?e(v,{children:u?i("div",{className:"passcode-container",children:[i("div",{className:"pin",children:[s("APPS.SETTINGS.ENTER_PASSCODE"),e(se,{pin:l,dark:n.display.theme==="light",Ref:c})]}),e("div",{className:"numbers",children:e(ie,{cb:S})})]}):i(v,{children:[e("div",{style:{marginTop:"0.5rem"}}),e("div",{className:"category-title",children:s("APPS.SETTINGS.FACE_ID")}),e("section",{children:n.security.faceId?e("div",{className:"settings-item",style:{cursor:"pointer"},onClick:()=>{C.PopUp.set({title:s("APPS.SETTINGS.DISABLE_FACE_ID_POPUP.TITLE"),description:s("APPS.SETTINGS.DISABLE_FACE_ID_POPUP.TEXT"),buttons:[{title:s("APPS.SETTINGS.DISABLE_FACE_ID_POPUP.CANCEL")},{title:s("APPS.SETTINGS.DISABLE_FACE_ID_POPUP.CONFIRM"),color:"red",cb:()=>h(!1)}]})},children:e("div",{className:"setting",children:e("div",{className:"title red",children:s("APPS.SETTINGS.RESET_FACE_ID")})})}):e("div",{className:"settings-item",style:{cursor:"pointer"},onClick:()=>{n.security.pinCode&&C.PopUp.set({title:s("APPS.SETTINGS.ENABLE_FACE_ID_POPUP.TITLE"),description:s("APPS.SETTINGS.ENABLE_FACE_ID_POPUP.TEXT"),buttons:[{title:s("APPS.SETTINGS.ENABLE_FACE_ID_POPUP.CANCEL")},{title:s("APPS.SETTINGS.ENABLE_FACE_ID_POPUP.CONFIRM"),cb:()=>h(!0)}]})},children:e("div",{className:"setting",children:e("div",{className:oe("title",n.security.pinCode?"blue":"grey"),children:s("APPS.SETTINGS.ENABLE_FACE_ID")})})})}),e("div",{className:"category-title",children:s("APPS.SETTINGS.PIN_CODE")}),e("section",{children:n.security.pinCode?i(v,{children:[e("div",{className:"settings-item",style:{cursor:"pointer"},onClick:()=>{C.PopUp.set({title:s("APPS.SETTINGS.DISABLE_PIN_POPUP.TITLE"),description:s("APPS.SETTINGS.DISABLE_PIN_POPUP.TEXT"),buttons:[{title:s("APPS.SETTINGS.DISABLE_PIN_POPUP.CANCEL")},{title:s("APPS.SETTINGS.DISABLE_PIN_POPUP.CONFIRM"),color:"red",cb:_}]})},children:e("div",{className:"setting",children:e("div",{className:"title red",children:s("APPS.SETTINGS.TURN_PASSCODE_OFF")})})}),e("div",{className:"settings-item",style:{cursor:"pointer"},onClick:()=>E(!0),children:e("div",{className:"setting",children:e("div",{className:"title blue",children:s("APPS.SETTINGS.CHANGE_PASSCODE")})})})]}):i(v,{children:[e("div",{className:"settings-item",style:{cursor:"pointer"},onClick:()=>E(!0),children:e("div",{className:"setting",children:e("div",{className:"title blue",children:s("APPS.SETTINGS.TURN_PASSCODE_ON")})})}),e("div",{className:"settings-item",children:e("div",{className:"setting",children:e("div",{className:"title grey",children:s("APPS.SETTINGS.CHANGE_PASSCODE")})})})]})})]})}):i("div",{className:"passcode-container",children:[i("div",{className:"pin",children:[s("APPS.SETTINGS.ENTER_PASSCODE"),e(se,{pin:l,dark:n.display.theme==="light",Ref:c})]}),e("div",{className:"numbers",children:e(ie,{cb:S})})]})]})}function He(r){var E;const c=p(o.Settings),n=p(o.PhoneNumber),[l,m]=P.useState(!1),[a,N]=P.useState(!1),[d,T]=P.useState([]);P.useEffect(()=>{le("Settings")&&A("Phone",{action:"getBlockedNumbers"},pe.Blocked).then(S=>{if(!S)return F("warning","Failed to get blocked numbers, no response");T(S)})},[]);const u=S=>{A("Phone",{action:"toggleBlock",number:S,blocked:!1},!0).then(h=>{if(!h)return F("warning","Failed to unblock number",S);T(_=>_.filter(R=>R!==S))})};return i(G.div,{...O("right",l?"blocked":"phone"),className:"animation-container",children:[i("div",{className:"top",children:[i("div",{className:"back",onClick:()=>l?m(!1):r.setPage([]),children:[e(b,{}),l?s("APPS.SETTINGS.BACK"):s("APPS.SETTINGS.TITLE")]}),e("div",{className:"title",children:l?s("APPS.SETTINGS.BLOCKED_CONTACTS"):s("APPS.SETTINGS.PHONE")}),l?e("div",{className:"value",onClick:()=>N(S=>!S),children:a?s("APPS.SETTINGS.DONE"):s("APPS.SETTINGS.EDIT")}):e("div",{})]}),e("div",{style:{marginTop:"0.5rem"}}),l?e(v,{children:e("section",{children:d.map((S,h)=>i("div",{className:"settings-item",children:[i("div",{className:"setting",children:[a?e(X,{className:"remove",onClick:()=>{C.PopUp.set({title:s("APPS.SETTINGS.UNBLOCK_POPUP.TITLE"),description:s("APPS.SETTINGS.UNBLOCK_POPUP.TEXT"),buttons:[{title:s("APPS.SETTINGS.UNBLOCK_POPUP.CANCEL")},{title:s("APPS.SETTINGS.UNBLOCK_POPUP.CONFIRM"),color:"red",cb:()=>{u(S)}}]})}}):e(X,{className:"hidden"}),e("div",{className:"title",children:q(S)})]}),e("div",{className:"setting-value"})]},h))})}):i(v,{children:[e("section",{children:i("div",{className:"settings-item",children:[e("div",{className:"setting",children:e("div",{className:"title",children:s("APPS.SETTINGS.MY_NUMBER")})}),i("div",{className:"setting-value",children:[q(n),e(Ee,{onClick:()=>ve(n)})]})]})}),i("section",{children:[i("div",{className:"settings-item",children:[e("div",{className:"setting",children:e("div",{className:"title",children:s("APPS.SETTINGS.SHOW_CALLER_ID")})}),e("div",{className:"setting-value",children:e(w,{onChange:()=>{var S;o.Settings.patch({phone:{...c.phone,showCallerId:!((S=c.phone)!=null&&S.showCallerId)}})},checked:((E=c.phone)==null?void 0:E.showCallerId)??!1})})]}),i("div",{className:"settings-item",style:{cursor:"pointer"},onClick:()=>m(!0),children:[e("div",{className:"setting",children:e("div",{className:"title",children:s("APPS.SETTINGS.BLOCKED_CONTACTS")})}),e("div",{className:"setting-value",children:e(U,{className:"chevron"})})]})]})]})]})}function Ve({setPage:r}){const c=p(o.PhoneNumber),n=p(H.MISC.BACKUPS),[l,m]=P.useState(!1);return P.useEffect(()=>{n||A("Backup",{action:"get"},[{number:c},{number:"13144122"}]).then(a=>{if(!a)return F("warning","Failed to get backups from the server");H.MISC.BACKUPS.set(a)})},[]),i(G.div,{...O("right","profile"),className:"animation-container",children:[i("div",{className:"top",children:[i("div",{className:"back",onClick:()=>r([]),children:[e(b,{}),s("APPS.SETTINGS.TITLE")]}),e("div",{className:"title",children:s("APPS.SETTINGS.CLOUD_BACKUP")}),e("div",{className:"value",onClick:()=>m(a=>!a),children:l?s("APPS.SETTINGS.DONE"):s("APPS.SETTINGS.EDIT")})]}),e("div",{style:{marginTop:"0.5rem"}}),e("div",{className:"category-title",children:s("APPS.SETTINGS.YOUR_PROFILE")}),e("section",{children:i("div",{className:"settings-item",style:{cursor:"pointer"},onClick:()=>{if(n!=null&&n.find(a=>a.number===c))return C.PopUp.set({title:s("APPS.SETTINGS.BACKUP_ERROR_POPUP.WARNING"),description:s("APPS.SETTINGS.BACKUP_ERROR_POPUP.ALREADY_HAVE"),buttons:[{title:s("APPS.SETTINGS.BACKUP_ERROR_POPUP.OK")}]});C.PopUp.set({title:s("APPS.SETTINGS.SAVE_BACKUP_POPUP.TITLE"),description:s("APPS.SETTINGS.SAVE_BACKUP_POPUP.TEXT"),buttons:[{title:s("APPS.SETTINGS.SAVE_BACKUP_POPUP.CANCEL")},{title:s("APPS.SETTINGS.SAVE_BACKUP_POPUP.CONFIRM"),cb:()=>{A("Backup",{action:"create"},!0).then(a=>{if(!a)return F("warning","Failed to create a backup");H.MISC.BACKUPS.set([{number:c},...n])})}}]})},children:[e("div",{className:"setting",children:e("div",{className:"title",children:s("APPS.SETTINGS.CREATE_BACKUP")})}),e("div",{className:"setting-value"})]})}),e("div",{className:"category-title",children:s("APPS.SETTINGS.BACKUPS")}),e("section",{children:n==null?void 0:n.map((a,N)=>i("div",{className:"settings-item",style:{cursor:a.number!==c?"pointer":"not-allowed"},"data-disabled":a.number===c&&!l,onClick:()=>{if(a.number===c)return C.PopUp.set({title:s("APPS.SETTINGS.BACKUP_ERROR_POPUP.ERROR"),description:s("APPS.SETTINGS.BACKUP_ERROR_POPUP.SAME_PHONE"),buttons:[{title:s("APPS.SETTINGS.BACKUP_ERROR_POPUP.OK")}]});C.PopUp.set({title:s("APPS.SETTINGS.APPLY_BACKUP_POPUP.TITLE"),description:s("APPS.SETTINGS.APPLY_BACKUP_POPUP.TEXT"),buttons:[{title:s("APPS.SETTINGS.APPLY_BACKUP_POPUP.CANCEL")},{title:s("APPS.SETTINGS.APPLY_BACKUP_POPUP.CONFIRM"),color:"red",cb:()=>{A("Backup",{action:"apply",number:a.number},!0).then(d=>{if(!d)return F("error","Could not apply backup, apply returned false");setTimeout(()=>{C.PopUp.set({title:s("APPS.SETTINGS.SUCCESS"),description:s("APPS.SETTINGS.SUCCESS_TEXT"),buttons:[{title:s("APPS.SETTINGS.OK")}]})},500)})}}]})},children:[i("div",{className:"setting",children:[l&&e(X,{className:"remove",onClick:d=>{d.stopPropagation(),C.PopUp.set({title:s("APPS.SETTINGS.REMOVE_BACKUP_POPUP.TITLE"),description:s("APPS.SETTINGS.REMOVE_BACKUP_POPUP.TEXT"),buttons:[{title:s("APPS.SETTINGS.REMOVE_BACKUP_POPUP.CANCEL")},{title:s("APPS.SETTINGS.REMOVE_BACKUP_POPUP.CONFIRM"),color:"red",cb:()=>{A("Backup",{action:"delete",number:a.number}).then(T=>{if(!T)return F("error","Could not delete backup");H.MISC.BACKUPS.set(H.MISC.BACKUPS.value.filter(u=>u.number!==a.number))})}}]})}}),e("div",{className:"title",children:q(a.number)})]}),e("div",{className:"setting-value"})]},N))})]})}function $(r,c){if(!r.match(/\d+\.\d+\.\d+/)||!c.match(/\d+\.\d+\.\d+/))return!1;const n=r.split(".").map(Number),l=c.split(".").map(Number);return(n[0]??0)<(l[0]??0)?!0:(n[0]??0)>(l[0]??0)?!1:(n[1]??0)<(l[1]??0)?!0:(n[1]??0)>(l[1]??0)?!1:(n[2]??0)<(l[2]??0)}function We(r){const{settingsSections:c}=P.useContext(j),n=p(o.Settings);return i(G.div,{...O("right","softwareUpdate"),className:"animation-container",children:[i("div",{className:"top",children:[i("div",{className:"back",onClick:()=>{var l;return r.setPage((l=c==null?void 0:c[2])==null?void 0:l[0].options)},children:[e(b,{}),s("APPS.SETTINGS.TITLE")]}),e("div",{className:"title",children:s("APPS.SETTINGS.SOFTWARE_UPDATE")}),e("div",{})]}),e("div",{style:{marginTop:"0.5rem"}}),e("section",{children:i("div",{className:"settings-item",style:{cursor:"pointer"},children:[e("div",{className:"setting",children:e("div",{className:"title",children:s("APPS.SETTINGS.AUTOMATIC_UPDATES")})}),e("div",{className:"setting-value",children:e("div",{className:"value",children:s("APPS.SETTINGS.OFF")})})]})}),$(n.version,n.latestVersion)&&e("section",{children:i("div",{className:"settings-item",style:{flexDirection:"column",alignItems:"inherit",gap:"0.75rem"},children:[i("div",{className:"item-header",children:[e("img",{src:"./assets/img/lbos.webp"}),i("div",{className:"info",children:[e("div",{className:"title",children:n.latestVersion}),e("div",{className:"author",children:e($e,{})})]})]}),e("div",{className:"item-content",children:"Please tell your server owner to update the phone to the latest version."})]})}),!$(n.version,n.latestVersion)&&i("div",{className:"up-to-date",children:[i("div",{className:"version",children:["V ",n==null?void 0:n.version]}),e("div",{className:"title",children:s("APPS.SETTINGS.UP_TO_DATE")})]})]})}const $e=()=>{const r="abcdefghijklmnopqrstuvwxyz".split("");return i(v,{children:[r[11].toUpperCase(),r[1].toUpperCase()]})};function te({setPage:r,type:c}){const{settingsSections:n}=P.useContext(j);return i(G.div,{...O("right",c??"system"),className:"animation-container",children:[i("div",{className:"top",children:[i("div",{className:"back",onClick:()=>{var l;return r((l=n==null?void 0:n[2])==null?void 0:l[0].options[1][1].options)},children:[e(b,{}),s("APPS.SETTINGS.TITLE")]}),e("div",{className:"title",children:s(`APPS.SETTINGS.${c.toUpperCase()}`)}),e("div",{})]}),e("div",{style:{marginTop:"0.5rem"}}),i("section",{children:[c==="Language"&&e(je,{}),c==="Temperature"&&e(ze,{})]})]})}const je=()=>{const r=p(o.Settings),[c,n]=P.useState([]);return P.useEffect(()=>{A("getLocales",null,ge).then(l=>{l&&n(l)})},[]),P.useEffect(()=>{Ae(r.locale)},[r.locale]),i(v,{children:[c.map((l,m)=>e("div",{className:"settings-item",style:{cursor:"pointer"},onClick:()=>o.Settings.patch({locale:l.locale}),children:i("div",{className:"setting",children:[l.locale===r.locale?e(D,{className:"checkmark"}):e(D,{className:"checkmark hidden"}),e("div",{className:"title",children:l.name})]})},m)),";"]})},ze=()=>{const r=p(o.Settings);return i(v,{children:[e("div",{className:"settings-item",style:{cursor:"pointer"},onClick:()=>o.Settings.patch({weather:{celcius:!0}}),children:i("div",{className:"setting",children:[r.weather&&r.weather.celcius?e(D,{className:"checkmark"}):e(D,{className:"checkmark hidden"}),e("div",{className:"title",children:s("APPS.SETTINGS.CELCIUS")})]})}),e("div",{className:"settings-item",style:{cursor:"pointer"},onClick:()=>o.Settings.patch({weather:{celcius:!1}}),children:i("div",{className:"setting",children:[r.weather&&r.weather.celcius===!1?e(D,{className:"checkmark"}):e(D,{className:"checkmark hidden"}),e("div",{className:"title",children:s("APPS.SETTINGS.FAHRENHEIT")})]})})]})};const j=P.createContext(null);function Ze(){var J;const r=p(o.Settings),c=p(L),[n,l]=P.useState(""),[m,a]=P.useState([]),N=p(ce),[d,T]=P.useState([]),[u,E]=P.useState(null),[S,h]=P.useState(null),[_,R]=P.useState(null),[I,M]=P.useState([]);P.useEffect(()=>{M(f=>[[{name:s("APPS.SETTINGS.AIRPLANE_MODE"),icon:e(Ie,{className:"orange"}),description:s("APPS.SETTINGS.AIRPLANE_MODE_DESCRIPTION"),switch:!0,value:r.airplaneMode,onChange:()=>o.Settings.patch({airplaneMode:!r.airplaneMode})},{name:s("APPS.SETTINGS.STREAMER_MODE"),icon:e(Ce,{className:"purple"}),description:s("APPS.SETTINGS.STREAMER_MODE_DESCRIPTION"),switch:!0,value:r.streamerMode,onChange:()=>o.Settings.patch({streamerMode:!r.streamerMode})}],[{name:s("APPS.SETTINGS.NOTIFICATIONS"),description:s("APPS.SETTINGS.NOTIFICATIONS_DESCRIPTION"),icon:e(fe,{className:"red"}),options:e(Be,{setPage:T})},{name:s("APPS.SETTINGS.SOUND_HAPTICS"),description:s("APPS.SETTINGS.SOUND_HAPTICS_DESCRIPTION"),icon:e(Y,{className:"pink"}),options:e(De,{setPage:T})}],[{name:s("APPS.SETTINGS.GENERAL"),description:s("APPS.SETTINGS.GENERAL_DESCRIPTION"),icon:e(Ge,{className:"grey"}),notification:$(r.version,r.latestVersion),options:[[{name:s("APPS.SETTINGS.ABOUT"),options:[[{name:s("APPS.SETTINGS.NAME"),value:r.name,input:{type:"name",maxLength:20},cb:(g,t)=>{A("setPhoneName",g)}},{name:s("APPS.SETTINGS.VERSION"),value:r.version},{name:s("APPS.SETTINGS.MODEL_NAME"),value:"LB Phone"},{name:s("APPS.SETTINGS.SERIAL_NUMBER"),value:"DSDWWWSSF3"},{name:s("APPS.SETTINGS.DEVELOPED_BY"),value:"Breze & Loaf Scripts"},{name:s("APPS.SETTINGS.PURCHASE_AT"),value:"https://store.lbscripts.com",isLink:!0}],[{name:s("APPS.SETTINGS.SONGS"),value:"0"},{name:s("APPS.SETTINGS.VIDEOS"),value:0},{name:s("APPS.SETTINGS.PHOTOS"),value:0},{name:s("APPS.SETTINGS.APPLICATIONS"),value:x()},{name:s("APPS.SETTINGS.CAPACITY"),value:`${r.storage.total/1e3/1e3} GB`},{name:s("APPS.SETTINGS.AVAILABLE"),value:`${V((r.storage.total-r.storage.used)/1e3/1e3,1)} GB`}]]},{name:s("APPS.SETTINGS.SOFTWARE_UPDATE"),options:e(We,{setPage:T}),notification:$(r.version,r.latestVersion)},{name:s("APPS.SETTINGS.PHONE_STORAGE"),options:e(we,{setPage:T})}],[{name:s("APPS.SETTINGS.DATE_TIME"),options:[[{id:"twelveHourClock",name:s("APPS.SETTINGS.24_HOUR_TIME"),switch:!0,value:!r.time.twelveHourClock,onChange:()=>{var g,t,k,y,K;return o.Settings.patch({time:{...(t=(g=o.Settings)==null?void 0:g.value)==null?void 0:t.time,twelveHourClock:!((K=(y=(k=o.Settings)==null?void 0:k.value)==null?void 0:y.time)!=null&&K.twelveHourClock)}})}}],[{name:s("APPS.SETTINGS.SET_AUTOMATICALLY"),switch:!0,value:!0,disabled:!0},{name:s("APPS.SETTINGS.TIME_ZONE"),value:Intl.DateTimeFormat().resolvedOptions().timeZone??"Unknown"}]]},{name:s("APPS.SETTINGS.LANGUAGE_REGION"),options:[[{name:s("APPS.SETTINGS.LANGUAGE"),value:s("LABEL"),options:e(te,{type:"Language",setPage:T})}],[{name:s("APPS.SETTINGS.TEMPERATURE"),value:r.weather&&r.weather.celcius?"C":"F",options:e(te,{type:"Temperature",setPage:T})}]]}],[{name:s("APPS.SETTINGS.RESET_POPUP.TITLE"),onClick:()=>{C.PopUp.set({title:s("APPS.SETTINGS.RESET_POPUP.TITLE"),description:s("APPS.SETTINGS.RESET_POPUP.TEXT"),buttons:[{title:s("APPS.SETTINGS.RESET_POPUP.CANCEL")},{title:s("APPS.SETTINGS.RESET_POPUP.CONFIRM"),color:"red",cb:()=>A("Security",{action:"factoryReset"})}]})}}]]},{name:s("APPS.SETTINGS.DISPLAY_BRIGHTNESS"),description:s("APPS.SETTINGS.DISPLAY_BRIGHTNESS_DESCRIPTION"),icon:e(Oe,{className:"blue"}),options:e(Ue,{setPage:T})},{name:s("APPS.SETTINGS.WALLPAPER"),description:s("APPS.SETTINGS.WALLPAPER_DESCRIPTION"),icon:e(_e,{className:"lightblue"}),options:e(Me,{setPage:T})},{name:s("APPS.SETTINGS.FACE_ID_PASSWORD"),description:s("APPS.SETTINGS.FACE_ID_PASSWORD_DESCRIPTION"),icon:e(ke,{className:"green"}),options:e(xe,{setPage:T})},{name:s("APPS.SETTINGS.BATTERY"),description:s("APPS.SETTINGS.BATTERY_DESCRIPTION"),icon:e(ye,{className:"green"})}],[{name:s("APPS.SETTINGS.PHONE"),description:s("APPS.SETTINGS.PHONE_DESCRIPTION"),icon:c.apps.Phone.icon??"./assets/img/icons/apps/Phone.jpg",color:"green",options:e(He,{setPage:T}),last:!0}]])},[r]);const x=()=>{let f=0;return r.apps.forEach(g=>{g.forEach(t=>{f++})}),f},Z=P.useRef(!0),B=P.useRef(!1);return P.useEffect(()=>{if(Z.current){Z.current=!1;return}B!=null&&B.current||(B.current=!0)},[r]),P.useEffect(()=>()=>{B!=null&&B.current&&(F("info","Settings","Changes detected, saving settings",o.Settings.value),A("setSettings",o.Settings.value),B.current=!1)},[N==null?void 0:N.active]),P.useEffect(()=>{if(n.length>0){let f=I.map(g=>g.filter(t=>{var k;return t.name.toLowerCase().includes(n.toLowerCase())?!0:t.options&&((k=t.options)!=null&&k.name)?t.options.filter(y=>{if(y.name.toLowerCase().includes(n.toLowerCase()))return!0;if(y.options)return y.options.filter(K=>{if(K.name.toLowerCase().includes(n.toLowerCase()))return!0})}):!1}));a(f)}else a([])},[n]),e(j.Provider,{value:{settingsSections:I},children:e("div",{className:"settings-container",children:d.length===0?i(G.div,{...O("left","home"),className:"animation-container",children:[e("div",{className:"title default",style:((J=r==null?void 0:r.display)==null?void 0:J.theme)==="dark"?{color:"#ffffff"}:{color:"#000000"},children:s("APPS.SETTINGS.TITLE")}),e(Re,{placeholder:s("SEARCH"),onChange:f=>l(f.target.value)}),m.length>0?e("section",{children:m.map((f,g)=>e(P.Fragment,{children:f.map((t,k)=>i("div",{className:"settings-item","data-clickable":!!(t.options||t.onClick),onClick:()=>{if(t.onClick)return t.onClick();t.options&&(T(t.options),E(t.name))},children:[i("div",{className:"setting",children:[t.icon&&(typeof t.icon=="string"?e("img",{src:t.icon}):t.icon),i("div",{className:"setting-info",children:[e("div",{className:"title",children:t.name}),t.description&&e("div",{className:"description",children:t.description})]})]}),i("div",{className:"setting-value",children:[t.switch&&e(w,{onChange:t.onChange,checked:t.value,disabled:t.disabled??!1}),t.value&&!t.switch&&e("div",{className:"value",children:t.value}),t.options&&e(U,{className:"chevron"})]})]},k))},g))}):i(v,{children:[i("div",{className:"profile",onClick:()=>T(e(Ve,{setPage:T})),children:[r.avatar?e("div",{className:"avatar","data-hasavatar":"true",style:{backgroundImage:`url(${r.avatar})`}}):e("div",{className:"avatar",children:Le(r.name)}),i("div",{className:"profile-info",children:[e("div",{className:"name",children:r.name}),e("div",{className:"info",children:s("APPS.SETTINGS.CLOUD_BACKUP")})]}),e(U,{className:"chevron"})]}),I.map((f,g)=>e("section",{"data-last":g===I.length-1,children:f.map((t,k)=>i("div",{className:"settings-item","data-clickable":!!(t.options||t.onClick),onClick:()=>{if(t.onClick)return t.onClick();t.options&&(T(t.options),E(t.name))},children:[i("div",{className:"setting",children:[t.icon&&(typeof t.icon=="string"?e("img",{src:t.icon}):t.icon),i("div",{className:"setting-info",children:[e("div",{className:"title",children:t.name}),t.description&&e("div",{className:"description",children:t.description})]})]}),t.notification&&e("div",{className:"settings-notification",children:"1"}),i("div",{className:"setting-value",children:[t.switch&&e(w,{onChange:t.onChange,checked:t.value,disabled:t.disabled??!1}),t.value&&!t.switch&&e("div",{className:"value",children:t.value}),t.options&&e(U,{className:"chevron"})]})]},k))},g))]})]}):e(v,{children:d.length?i(G.div,{...O("right",d.length),className:"animation-container",children:[i("div",{className:"top",children:[i("div",{className:"back",onClick:()=>{T((S==null?void 0:S.page)??[]),E((S==null?void 0:S.name)??"Settings"),h(null),R(null)},children:[e(b,{}),_??s("APPS.SETTINGS.TITLE")]}),i("div",{className:"title",children:[u??s("APPS.SETTINGS.TITLE")," "]}),e("div",{})]}),d.map((f,g)=>e("section",{children:f.map((t,k)=>i("div",{className:"settings-item","data-clickable":!!(t.options||t.onClick),onClick:()=>{var y;if(t.onClick)return t.onClick();t.options&&(T(t.options),E(t.name),(y=t.options)!=null&&y[0]&&h({page:d,name:t.name}))},children:[e("div",{className:"setting",children:i("div",{className:"setting-info",children:[e("div",{className:"title",children:t.name}),t.description&&e("div",{className:"description",children:t.description})]})}),t.notification&&e("div",{className:"settings-notification",children:"1"}),e("div",{className:"setting-value",children:t.input?e(be,{defaultValue:t.value,maxLength:t.input.maxLength,onChange:y=>{let K={...r,[t.input.type]:y.target.value};o.Settings.set(K)},onBlur:()=>{t.cb&&t.cb(r[t.input.type],r)}}):i(v,{children:[t.switch&&e(w,{checked:t.value,disabled:t.disabled??!1,onChange:()=>{t.onChange()}}),t.value&&e("div",{className:"value",children:t.isLink?e("a",{onClick:()=>window.invokeNative("openUrl",t.value),children:t.value}):t.value}),t.options&&e(U,{className:"chevron"})]})})]},k))},g))]}):d})})})}export{j as AppContext,Ze as default};
